$(function(){function i(i){i?n=setInterval(function(){$("#slideShowPics").find(".slide:first").fadeOut("slow",function(){$(this).next(".slide").fadeIn("slow").end().appendTo("#slideShowPics")})},7e3):clearInterval(n)}var e,t=$("body"),s=$("#flash");s.is(":visible")&&s.setRemoveTimeout(3e3),$(".printTrigger").on("click",function(i){i.preventDefault(),window.print()}),$(document).on("click",function(i){"shadow"==i.target.id&&(e.unfocusLight(),$("body").removeClass("unscrollable"),e.detach())});var a=$(".tabs span");a.each(function(){var i=$(this),e=i.attr("class").split(" ")[0].substr(4);i.hasClass("activeTab")?$("#"+e).show():$("#"+e).hide()}),a.on("click",function(){var i=$(this);if(!i.hasClass("activeTab")){var e=i.siblings(".activeTab").removeClass("activeTab");$("#"+e.attr("class").split(" ")[0].substr(4)).fadeOut("normal",function(){$("#"+i.attr("class").split(" ")[0].substr(4)).fadeIn()}),i.addClass("activeTab")}});var n=null;i(!0),$("#slideShowPics").find(".slide:gt(0)").hide(),$('span[class$="Toggle"]').on("click",function(){resetActiveField();var i=$(this).attr("class"),e=$("#"+i.substr(0,i.length-6));e.is(":visible")?(resetActiveField(),e.slideToggle("normal",function(){ofh=new $.fn.dataTable.FixedHeader(table)})):(e.slideToggle(),t.children(".fixedHeader").each(function(){$(this).remove()}))}),$("#slideLeft").on("click",function(){i(!1),$("#slideShowPics").find(".slide:first").fadeOut("slow",function(){$(this).siblings(".slide:last-of-type").fadeIn("slow").prependTo("#slideShowPics")}),i(!0)}),$("#slideRight").on("click",function(){i(!1),$("#slideShowPics").find(".slide:first").fadeOut("slow",function(){$(this).next(".slide").fadeIn("slow").end().appendTo("#slideShowPics")}),i(!0)});var o=!1,l=$("#categories").html();$(".search input").on("keyup",function(i){var e=$(this).val().trim().toLowerCase();delay(function(){if(i.preventDefault(),!o){o=!0;var t=$("#categories");0==e.length?t.html(l):e.length>1&&$.ajax({url:baseUrl+"/products/search/"+e,type:"GET"}).success(function(i){""!=$.trim(i)&&t.html(i)}).error(function(){addMessage("Something with wrong, please try again.")}),o=!1}},150)}),t.hasClass("productPage")&&$(".productAttributes tbody tr").on("click",function(){window.location=$(this).next("tr.productMeta").find("a").attr("href")}),$(".magnifiable").on("click",function(){var i=$(this),s=i.attr("src"),a=$(window).height(),n=$("<img />",{src:s,css:{display:"none"}}).appendTo(t),o=n.height();if(n.remove(),a-100>o)var l={top:"50%",marginTop:-parseInt(o/2)};else var l={top:0,marginTop:"50px"};var c=$("<div/>",{id:"stageWrapper",css:l}).prependTo($("body")),d=$("<div/>",{id:"stage"}).appendTo(c),r=$("<div/>",{id:"imageWrapper"}).appendTo(d),h=$("<img/>",{src:s,css:{"max-height":$(window).height()-100,width:"auto"}}).appendTo(r);e=c,c.focusLight(),c.css({width:h.width(),"margin-left":-(h.width()/2)}),t.addClass("unscrollable")})});